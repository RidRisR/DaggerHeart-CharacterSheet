# FormData 重构总体计划

## 目标
- 彻底梳理和规范 FormData 的定义与使用，消除 any、野生字段和历史遗留字段，提升类型安全和可维护性。

## 总体步骤

### 1. 字段引用与定义梳理
- 全局统计所有 formData 字段的实际引用。
- 标记未被引用的字段，准备移除。
- 标记被引用但未定义的字段，准备补充定义。
- 生成字段引用与定义的对应关系表。

### 2. 类型系统强化
- 将所有 formData 相关的 any 替换为 FormData 类型。
- 对 setFormData、onFormDataChange 等相关函数参数类型进行严格约束。
- 对 props、state、context 等涉及 formData 的地方全部类型化。

### 3. 字段精简与结构优化
- 移除未被引用的历史遗留字段。
- 对结构复杂的字段（如武器、护甲、升级等）进行子类型拆分和优化。
- 明确每个字段的注释和业务含义。

### 4. 组件与逻辑适配
- 逐步修改所有组件、hooks、工具函数，适配新的 FormData 类型。
- 对于动态扩展字段，统一纳入类型定义或重构为更合理的数据结构。

### 5. 规范与自动化
- 建立字段新增、变更的流程规范。
- 编写自动化脚本，定期检查字段引用与定义的一致性。
- 代码评审时重点关注 FormData 相关变更。

### 6. 文档与维护
- 为 FormData 字段建立详细文档，说明用途和使用场景。
- 定期维护和更新字段清单。

---

本计划为整个 FormData 重构的路线图，所有阶段性成果、脚本、报告均存放于 refactor 文件夹。
